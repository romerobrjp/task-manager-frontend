<div *ngIf="task">
  <h1 class="page-header text-center">Detalhes da tarefa <strong> {{ task?.title }} </strong> </h1>

  <form #taskForm="ngForm" *ngIf="task">
    <div class="row">
      <div
        class="form-group col-md-6 has-feedback" 
        [class.has-error]="title.invalid && title.touched"
        [class.has-success]="title.valid"
      >
        <label for="title" class="control-label">Título</label>
        <input
          id="title"
          class="form-control"
          name="title"
          placeholder="Título da tarefa aqui..."
          required
          type="text"
          [(ngModel)]="task.title"
          #title="ngModel"
        />
        <span 
          class="glyphicon form-control-feedback" 
          [class.glyphicon-ok]="title.valid" 
          [class.glyphicon-remove]="title.invalid && title.touched"
          style="margin-right: 20px"
        ></span>
        <div class="text-danger" *ngIf="title.invalid && title.touched">O título é obrigatório</div>
      </div>

      <div class="form-group col-md-3">
        <label for="deadline" class="control-label">Prazo de entrega</label>
        <input
          id="deadline"
          class="form-control"
          name="deadline"
          placeholder="..."
          type="text"
          [(ngModel)]="task.deadline"
        />
      </div>

      <div class="form-group col-md-3">
        <label for="done" class="control-label">Situração</label>
        <select 
          id="done"
          class="form-control"
          name="done"
          [(ngModel)]="task.done"
        >
          <option *ngFor="let option of doneOptions" [value]="option.value">{{ option.text }}</option>
        </select>
      </div>
    </div>

    <div class="row">
      <div class="form-group col-md-12">
        <label for="description" class="control-label">Situração</label>
        <textarea 
          id="description"
          class="form-control"
          name="description"
          rows="5"
          [(ngModel)]="task.description"
        ></textarea>
      </div>
    </div>
    
    <div class="form-group text-center">
      <div>
        <button class="btn btn-default" (click)="goBack()">Voltar</button>
        <button type="submit" class="btn btn-success" (click)='update()' [disabled]="taskForm.invalid">Atualizar</button>
      </div>
    </div>
  </form>

  <hr />

  <pre>{{ task | json }}</pre>
</div>